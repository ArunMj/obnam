Obnam Performance Specification
===============================

This is the performance specification document for Obnam, for the
rewrite started on 2009-11-09.


The benchmark scenario
-------------------

The benchmark will be run on havelock, a Lenovo Thinkpad X200s laptop
with a rotational hard disk, dual-core 1.8 GHz CPU, and 4 GiB RAM.

Backup data will be generated using version 1.0 of genbackupdata.

The backup store will be another machine known as gytha (fast CPU and disk), 
accessed over WiFi 801.11g (about 2 MB/s practical upload speed).

The following `benchmark.conf` configuration file will be used:

    [obnam]
    store = sftp://gytha/~benchmark.store
    root = benchmark.data
    compress = gzip
    
The following commands will be run as the benchmark (not including
any monitoring and measurement):

    genbackupdata --create 1g benchmark.data
    OBNAM_CONFIGS=benchmark.conf obnam backup
    genbackupdata --create 10m --modify=10m benchmark.data
    OBNAM_CONFIGS=benchmark.conf obnam backup

The operating system disk caches are **not** cleared between any
commands, but they are emptied before the first one.


Requirements
---------

For every obnam invocation, all of the following must be true:

* The obnam process(es) use(s) at most 100 MiB of RAM at any one point.
* Total disk usage on the server must be at most 1000 MiB.

For the first obnam invocation, all of the following must be true:

* The uplink will be approximately saturated. This means the total run 
  time must be less than 20 minutes.
* Total amount of transferred data must be at most 1000 MiB.

For the second obnam invocation, all of the following must be true:

* The total run time must be less than one minute.
* Total amount of transferred data must be at most 20 MiB.

